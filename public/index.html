<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å­¦æ ¡æ¸¸æˆä¸­å¿ƒ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 50px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .login-btn {
            padding: 15px 30px;
            background-color: #ff6b6b;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            cursor: pointer;
            font-weight: bold;
            margin: 20px;
            transition: all 0.3s ease;
        }
        .login-btn:hover {
            background-color: #ff5252;
            transform: scale(1.05);
        }
        .container {
            background: rgba(255,255,255,0.1);
            padding: 40px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            max-width: 500px;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ® å­¦æ ¡æ¸¸æˆä¸­å¿ƒ</h1>
        <p>ä½¿ç”¨ä½ çš„å­¦æ ¡è´¦å·ç™»å½•å¼€å§‹æ¸¸æˆ</p>
        
        <button class="login-btn" onclick="handleWixLogin()">
            ğŸ« ä½¿ç”¨å­¦æ ¡è´¦å·ç™»å½•
        </button>
        
        <div id="status" style="margin-top: 20px;"></div>
    </div>

    <script>
        // Wix ç™»å½•å‡½æ•°
        function handleWixLogin() {
            const clientId = '54186d51-7e8a-483d-b2bd-854aa1ba75ad';
            const redirectUri = 'https://juice-game-server2-production.up.railway.app/auth-callback';
            const scope = 'members:read';
            
            const wixAuthUrl = `https://www.wix.com/installer/oauth2/authorize?client_id=${clientId}&redirect_uri=${encodeURIComponent(redirectUri)}&response_type=code&scope=${scope}`;
            
            console.log('è·³è½¬åˆ° Wix ç™»å½•:', wixAuthUrl);
            
            // åœ¨æ–°çª—å£æ‰“å¼€ç™»å½•é¡µé¢
            window.open(wixAuthUrl, 'wix-login', 'width=600,height=700');
        }

        // ç›‘å¬æ¥è‡ª OAuth å›è°ƒçš„æ¶ˆæ¯
        window.addEventListener('message', function(event) {
            console.log('æ”¶åˆ°æ¶ˆæ¯:', event.data);
            
            if (event.data && event.data.type === 'wix-oauth-callback') {
                const { code } = event.data;
                console.log('ğŸ‰ æ”¶åˆ° Wix è®¤è¯ä»£ç :', code);
                
                document.getElementById('status').innerHTML = `
                    <div style="color: lightgreen;">
                        <h3>âœ… ç™»å½•æˆåŠŸï¼</h3>
                        <p>è®¤è¯ä»£ç : ${code}</p>
                        <p>æ­£åœ¨åŠ è½½æ¸¸æˆ...</p>
                    </div>
                `;
                
                // å¯ä»¥å…³é—­ç™»å½•çª—å£
                if (event.source) {
                    event.source.close();
                }
                
                // è¿™é‡Œå¯ä»¥è·³è½¬åˆ°æ¸¸æˆé¡µé¢æˆ–å¼€å§‹æ¸¸æˆ
                setTimeout(() => {
                    alert('å¼€å§‹æ¸¸æˆï¼');
                }, 1000);
            }
        });
    </script>
</body>
</html>