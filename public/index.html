<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>FUN X ARENA</title>
<style>
body{margin:0;font-family:Arial;background:#111;color:#fff;display:flex;justify-content:center;align-items:center;height:100vh}
.box{width:380px;padding:30px;background:#222;border-radius:12px;text-align:center}
input{width:100%;padding:10px;margin:8px 0;border:none;border-radius:6px}
button{width:100%;padding:10px;margin-top:10px;font-size:16px;background:#f7c23e;color:#000;border:none;border-radius:6px;cursor:pointer}
a{color:#f7c23e;cursor:pointer;display:block;margin-top:10px}
.hidden{display:none}
</style>
</head>
<body>

<div id="auth" class="box">
  <h2>WELCOME</h2>
  <input id="email" placeholder="Email">
  <input id="password" type="password" placeholder="Password">
  <button onclick="login()">Login</button>
  <button onclick="registerUser()">Create Account</button>
</div>

<div id="lobby" class="box hidden">
  <h2>ARENA</h2>
  <p id="welcome"></p>
  <button onclick="enterArena()">Enter Arena</button>
</div>

<script>
async function api(path, data){
  const r = await fetch(path,{
    method:data?"POST":"GET",
    headers:{"Content-Type":"application/json"},
    body:data?JSON.stringify(data):undefined
  });
  return r.json();
}

async function checkMe(){
  const r = await api('/api/me');
  if(r.ok){
    document.getElementById('auth').classList.add('hidden');
    document.getElementById('lobby').classList.remove('hidden');
    document.getElementById('welcome').innerText = "Hi " + (r.user.name || r.user.email);
  }
}
checkMe();

async function login(){
  const email=document.getElementById('email').value;
  const password=document.getElementById('password').value;
  const r = await api('/api/login',{email,password});
  if(r.ok) location.reload();
  else alert(r.error||"Login failed");
}

async function registerUser(){
  const email=document.getElementById('email').value;
  const password=document.getElementById('password').value;
  const r = await api('/api/register',{email,password});
  if(r.ok) location.reload();
  else alert(r.error||"Sign up failed");
}

function enterArena(){
  alert("âœ… Arena Coming Soon...");
}
</script>
</body>
</html>