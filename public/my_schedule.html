<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>æˆ‘çš„è¯¾è¡¨</title>
  <style>
    body{font-family:Arial;margin:0;background:#f9f9f9;padding-bottom:5rem}
    .header{background:#ff6b35;color:white;padding:1.5rem;text-align:center}
    .container{padding:1rem}
    
    .class-card{background:white;border-radius:10px;padding:15px;margin-bottom:10px;box-shadow:0 2px 5px rgba(0,0,0,0.05);border-left:5px solid #ddd}
    .unpaid{border-left-color:#ff4757} /* æœªä»˜æ¬¾çº¢è‰² */
    .active{border-left-color:#2ed573} /* å·²ä»˜æ¬¾/å·²ç­¾åˆ°ç»¿è‰² */
    
    .row{display:flex;justify-content:space-between;margin-bottom:5px}
    .status-tag{font-size:0.8rem;padding:2px 8px;border-radius:10px;color:white}
    
    .nav-bar{position:fixed;bottom:0;left:0;width:100%;background:white;border-top:1px solid #eee;display:flex;justify-content:space-around;padding:10px 0;z-index:99}
    .nav-item{text-decoration:none;color:#888;font-size:0.8rem;text-align:center;display:flex;flex-direction:column}
    .nav-icon{font-size:1.4rem;margin-bottom:2px}
    .active-nav{color:#ff6b35}
  </style>
</head>
<body>
  <div class="header">
    <h2>ğŸ“… æˆ‘çš„å‘¨è¯¾è¡¨</h2>
    <div style="font-size:0.9rem">My Weekly Schedule</div>
  </div>

  <div class="container" id="list">
    <p style="text-align:center;margin-top:2rem">åŠ è½½ä¸­...</p>
  </div>

  <div class="nav-bar">
    <a href="/games.html" class="nav-item"><span class="nav-icon">ğŸ®</span>å¤§å…</a>
    <a href="#" class="nav-item active-nav"><span class="nav-icon">ğŸ“…</span>æˆ‘çš„è¯¾è¡¨</a>
    <a href="/timetable.html" class="nav-item"><span class="nav-icon">ğŸ›’</span>å»é€‰è¯¾</a>
    <a href="/growth.html" class="nav-item"><span class="nav-icon">ğŸ“Š</span>æˆé•¿</a>
  </div>

  <script>
    async function load() {
        const res = await fetch('/api/my-schedule');
        const data = await res.json();
        const list = document.getElementById('list');
        
        if(data.length === 0) {
            list.innerHTML = '<div style="text-align:center;color:#999;margin-top:50px">æš‚æ— è¯¾ç¨‹<br><a href="/timetable.html" style="color:#ff6b35">å»æŠ¥å ></a></div>';
            return;
        }

        list.innerHTML = '';
        data.forEach(c => {
            const isUnpaid = c.status === 'UNPAID';
            const statusText = isUnpaid ? 'å¾…ä»˜æ¬¾' : 'å·²ç¡®è®¤';
            const statusColor = isUnpaid ? '#ff4757' : '#2ed573';
            
            list.innerHTML += `
            <div class="class-card ${isUnpaid ? 'unpaid' : 'active'}">
                <div class="row">
                    <div style="font-weight:bold;font-size:1.1rem">${c.name}</div>
                    <div style="font-weight:bold">$${c.price_snapshot}</div>
                </div>
                <div class="row">
                    <div style="color:#666">${c.day_of_week} ${c.start_time}</div>
                    <span class="status-tag" style="background:${statusColor}">${statusText}</span>
                </div>
                <div style="font-size:0.8rem;color:#999;margin-top:5px">
                    ${isUnpaid ? 'è¯·ç•™æ„é‚®ç®±æŸ¥æ”¶ Invoice è½¬è´¦' : 'æŠ¥åæˆåŠŸ'}
                </div>
            </div>`;
        });
    }
    load();
  </script>
</body>
</html>